---
title: "How have the effects from IP and Cast on movie profitability changed over time?"
author: Jack Cunningham
format: html
editor: visual
echo:   false
message: false
warning: false
---

```{r}
library(qs)
library(tidyverse)
library(mgcv)
library(tvReg)
library(ggrepel)
library(ggthemes)
```

```{r}
modeling_data <- qread("D:/Portfolio Projects/moviestar_analysis/Data/Processed_Data/Modeling/Combined/modeling_data.qs")
movie_df <- modeling_data$movie_level_df
```

# Research Motivation & Question

A common belief among people who follow the box office is that movie stars don't draw audiences the way they used to. Instead, the biggest hits today tend to be tied to established franchises, benefiting from familiar characters, shared universes, and nostalgia from earlier releases.

This project looks at whether that belief actually holds up in the data, or whether it's driven by how easy it is to remember the massive successes of franchises like Marvel or Star Wars.

In particular, I'm interested in whether star power has actually become less important over time, compared to the pull of established franchises.

# Data Overview

The data for this project is sourced from The Movie Database. The sample consists of the 50 highest-budgeted English-language films released each year between 1970 and 2024 that received a full theatrical release.

Focusing on high-budget theatrical films allows the analysis to concentrate on projects where commercial performance is a central objective, while excluding smaller art-house releases that often operate under different success criteria.

For each film, the dataset includes information on release date, production budget, box office revenue, cast members, and any collection or franchise the film is associated with.

# Key Measures

Two core challenges in this analysis are defining star power within a cast and separating it from the pull of established franchises. When a movie performs well at the box office, it is not always obvious why. Is the success driven by the lead actor, or is the film benefiting from being part of a popular series with a built-in audience?

The same ambiguity exists on the downside. When a film underperforms, it is unclear whether that outcome reflects weak audience interest in the cast, poor execution, or simply the limits of a franchise that audiences were never particularly excited about in the first place.

These challenges make it necessary to construct measures of star power and franchise strength that can assign credit more consistently across both successes and failures. This led me to using a value above replacement approach.

#### Value Above Replacement

Value above replacement methods are frequently used in sports and originated in the sabermetric revolution in baseball. The basic idea is that if we can set a baseline of performance and then analyze how much individual components contribute to outcomes above or below that baseline. In baseball, for example, wins above replacement (WAR) separates a player's value into offensive and defensive contributions.

I apply this same idea to movie performance by allocating credit between intellectual property and cast.

First, a baseline model is fit using a film's budget, genre, and release year to estimate expected profitability, to be consistent we use the generic estimate of revenue minus 2.5 times budget. This allows movies to be compared on a common scale by examining the difference between observed outcomes and what would be expected based on these core characteristics alone.

Take 1978 for example:

```{r}
movie_df <- movie_df |> mutate(
  successful_outlier = resid0 > 2,
  failure_outlier    = resid0 < -2
)
```

```{r}
movie_df |> 
  filter(year == 1978) |> 
  ggplot(aes(x = release_date, y = resid0)) +
  geom_point(aes(color = case_when(successful_outlier ~ "High",
               failure_outlier ~ "Low", (!successful_outlier|!failure_outlier) ~ "Normal")), show.legend = FALSE) +
  geom_text_repel(data = movie_df |> filter((year == 1978)&(abs(resid0) > 2)),
                         aes(label = title), vjust = -.1) +
  scale_color_manual(
      values = c(
        "High" = "green",
        "Low"  = "red",
        "Normal" = "black"
      )) +
  labs(x = "Date", y = "Performance Relative to Expectation (SDs)", 
       title = "Movies in 1978", subtitle = "Expected Performance is based on a baseline model using budget, genre and release year",
       caption = "Figure 1") +
  geom_hline(yintercept = 0, linetype = "dashed", alpha = .5) +
  theme_minimal()
```

As Figure 1 shows, films released in the same year can differ substantially in how much they exceed or fall short of expectations. Some films, such as Halloween, dramatically outperform what would be predicted based on budget and genre alone, while others fall well short.

The next question is how that excess performance should be attributed between the strength of the underlying intellectual property and the star power of the cast.

A key principle in this attribution is that only information available prior to a film's release can be used. For example, an actor like Tom Cruise is not treated as a star in his early roles, but only becomes one after establishing a track record of successful leading performances. Similarly, when evaluating the first entry in a franchise, no information about future sequels is used, ensuring that credit is not assigned based on outcomes that were unknowable at the time.

## Intellectual Property Power

An order is needed to consistently assign credit. Allocating performance to Intellectual Property serves two core purposes. For original films we can confidently set this metric to zero and assign credit entirely to the cast. For sequels, expected performance is naturally linked to the success of prior entries.

This order is especially important for well-established franchises. For instance, a reboot of Star Wars enters theaters with incredible tailwinds from previous successes. It would be misleading to attribute most of that expected success to the cast. To capture this effect, intellectual property power is measured using two complementary metrics: IP Stock and IP Momentum.

### IP Stock

IP Stock captures the accumulated performance of a franchise over time. It is defined as the cumulative sum of residual performance from all prior films within a given franchise. In effect, IP Stock represents the level of audience goodwill a franchise has built up before the release of a new entry.

Take the Star Wars franchise for instance:

```{r}
plot_df <- movie_df |>
  group_by(collection_id) |> 
  arrange(release_date) |> 
  mutate(
    y_prev = lag(ip_power_evergreen_prior),
    delta  = ip_power_evergreen_prior - y_prev
  ) |> 
  filter(!is.na(delta), delta != 0)
```

```{r}
movie_df |>
  filter(collection_name == "Star Wars Collection") |> 
  ggplot(aes(x = release_date, y = ip_power_evergreen_prior)) +
  geom_point() +
  geom_segment(
    data = plot_df |> filter(collection_name == "Star Wars Collection"),
    aes(x = release_date, xend = release_date, y = y_prev, 
        yend = ip_power_evergreen_prior - .25), 
    arrow = arrow(length = unit(.1, "inches"), type = "closed"),
    color = "green"
  ) +
  geom_text(
    data = plot_df |> filter(collection_name == "Star Wars Collection"),
    aes(
      x = release_date,
      y = (y_prev + ip_power_evergreen_prior)/2,
      label = sprintf("%.2f", delta)
    ),
    nudge_x = 550,
    size = 3
  ) +
  geom_line(linewidth = .6, alpha = .5,linetype = "dashed") +
  labs(x = "Date", y = "IP Stock", 
       title = "Star Wars IP Stock", subtitle = "IP Stock is the cumulative sum of residual performance from prior franchise entries",
       caption = "Figure 2") +
  theme(
    panel.grid.minor.x = element_blank()
  ) +
  theme_minimal() +
  theme(
    panel.grid.major.x = element_blank(),
    panel.grid.minor.x = element_blank()
  )
```

### IP Momentum

IP Momentum, on the other hand, captures the recent performance of a franchise using a decaying sum that places greater weight on more recent entries. This allows the measure to reflect how audience interest builds, or fades, as a series progresses, such as across a trilogy. Let's take a look at *Star Wars* momentum:

```{r}
eras <- tribble(
  ~eta,                ~start,              ~end,
  "Original Triology", as.Date("1977-05-25"), as.Date("1983-05-25"),
  "Prequel Triology",  as.Date("1999-05-19"), as.Date("2005-05-17"),
  "Sequel Triology",   as.Date("2015-12-15"), as.Date("2019-12-18")
)
movie_df |> 
  filter(collection_name == "Star Wars Collection") |> 
  ggplot(aes(x = release_date, y = ip_power_momentum_prior)) +
  geom_point() +
  geom_line(linewidth = .6, alpha = .5,linetype = "dashed") +
  labs(x = "Date", y = "IP Momentum", title = "Star Wars IP Momentum",
       subtitle = "IP Momentum reflects recent performance with greater weight placed on more recent entries", caption = "Figure 3") +
  geom_rect(data = eras,
            aes(xmin = start, xmax = end, ymin = -Inf, ymax = Inf), 
            inherit.aes = FALSE, alpha = .08, fill = "blue") +
  theme_minimal()
```

Figure 3 shows how IP momentum for the Star Wars franchise evolves over time. Momentum rises sharply during the original trilogy. The prequel trilogy generates a renewed increase in momentum, though growth is muted and levels off after weaker reception to later entries. The sequel trilogy follows a similar pattern. Between the three trilogies momentum tails off, highlighting the short-run and decaying nature of this measure.

## Cast Star Power

Now that we have IP Stock and IP Momentum defined for each movie cast level variables can be created. As previously discussed, it would be inapproriate to assign credit to the cast without first factoring in the IP effects. So we fit a new baseline for the movie after factoring in IP effects prior to the release. Lets see how relative performance changes for the Star Wars films after setting a new baseline.

```{r}
movie_df |>
  filter(collection_name == "Star Wars Collection") |> 
  ggplot(aes(x = release_date)) +
  geom_point(aes(y = resid0)) +
  geom_point(aes(y = resid_actor))
```
